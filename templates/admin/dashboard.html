{% extends "base.html" %}

{% block title %}Dashboard Admin - AGENCEI{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ğŸ“Š Dashboard Administrativo</h1>
    <p>VisÃ£o geral do sistema AGENCEI</p>
</div>

<!-- Cards de EstatÃ­sticas -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-content">
            <h3>{{ total_usuarios }}</h3>
            <p>Total de UsuÃ¡rios</p>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon">ğŸ“</div>
        <div class="stat-content">
            <h3>{{ total_alunos }}</h3>
            <p>Alunos</p>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon">ğŸ‘”</div>
        <div class="stat-content">
            <h3>{{ total_organizadores }}</h3>
            <p>Organizadores</p>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon">ğŸ”‘</div>
        <div class="stat-content">
            <h3>{{ total_admins }}</h3>
            <p>Administradores</p>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon">ğŸ¢</div>
        <div class="stat-content">
            <h3>{{ total_salas }}</h3>
            <p>Salas Cadastradas</p>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon">ğŸ“…</div>
        <div class="stat-content">
            <h3>{{ total_eventos }}</h3>
            <p>Eventos Criados</p>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon">âœ…</div>
        <div class="stat-content">
            <h3>{{ total_inscricoes }}</h3>
            <p>InscriÃ§Ãµes Total</p>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon">ğŸ«</div>
        <div class="stat-content">
            <h3>{{ cpfs_autorizados_disponiveis }}</h3>
            <p>CPFs DisponÃ­veis</p>
            <small>de {{ cpfs_autorizados_total }} total</small>
        </div>
    </div>
</div>

<!-- AÃ§Ãµes RÃ¡pidas -->
<div class="quick-actions">
    <h2>âš¡ AÃ§Ãµes RÃ¡pidas</h2>
    <div class="actions-grid">
        <a href="{{ url_for('admin.adicionar_cpf_autorizado') }}" class="action-card">
            <span class="action-icon">â•</span>
            <span>Adicionar CPF Autorizado</span>
        </a>
        <a href="{{ url_for('admin.adicionar_sala') }}" class="action-card">
            <span class="action-icon">ğŸ¢</span>
            <span>Adicionar Sala</span>
        </a>
        <a href="{{ url_for('admin.usuarios') }}" class="action-card">
            <span class="action-icon">ğŸ‘¥</span>
            <span>Gerenciar UsuÃ¡rios</span>
        </a>
        <a href="{{ url_for('admin.eventos') }}" class="action-card">
            <span class="action-icon">ğŸ“‹</span>
            <span>Ver Todos Eventos</span>
        </a>
    </div>
</div>

<!-- Eventos Recentes -->
{% if eventos_recentes %}
<div class="section">
    <h2>ğŸ“… Eventos Recentes</h2>
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>Evento</th>
                    <th>Organizador</th>
                    <th>Data/Hora</th>
                    <th>Sala</th>
                    <th>Inscritos</th>
                </tr>
            </thead>
            <tbody>
                {% for evento in eventos_recentes %}
                <tr>
                    <td><strong>{{ evento.nome_evento }}</strong></td>
                    <td>{{ evento.organizador.nome }}</td>
                    <td>{{ evento.data_hora.strftime('%d/%m/%Y Ã s %H:%M') }}</td>
                    <td>{{ evento.sala.nome }}</td>
                    <td>{{ evento.num_inscritos }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}

<!-- InscriÃ§Ãµes Recentes -->
{% if inscricoes_recentes %}
<div class="section">
    <h2>âœ… InscriÃ§Ãµes Recentes</h2>
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>Aluno</th>
                    <th>Evento</th>
                    <th>Data InscriÃ§Ã£o</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for inscricao in inscricoes_recentes %}
                <tr>
                    <td>{{ inscricao.aluno.nome }}</td>
                    <td>{{ inscricao.evento.nome_evento }}</td>
                    <td>{{ inscricao.inscrito_em.strftime('%d/%m/%Y %H:%M') }}</td>
                    <td>
                        <span class="badge badge-{{ inscricao.status_presenca|lower }}">
                            {{ inscricao.status_presenca }}
                        </span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}
{% endblock %}