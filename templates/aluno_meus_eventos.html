{% extends "base.html" %}
{% block title %}Meus Eventos Inscritos{% endblock %}

{% block content %}

<section class="section">

    <div class="section-surface spotlight" style="max-width: 1000px; margin: 0 auto;">

        <!-- HEADER -->
        <div class="section-header">
            <h2 class="section-title">Meus Eventos Inscritos</h2>
            <p class="section-subtitle">
                Acompanhe seus eventos e marque presença
            </p>
        </div>

        <!-- LISTA -->
        <div class="data-list">

            {% for evento in eventos %}
                {% set presente = evento.status_presenca == 'Presente' %}

                <div class="data-row">

                    <div>
                        <div class="data-title">
                            {{ evento.nome }}
                        </div>
                        <div class="data-meta">
                            {{ evento.local }} • {{ evento.data_hora }}
                        </div>

                        <div style="margin-top: 6px;">
                            {% if presente %}
                                <span class="badge badge-success">
                                    Presença Confirmada
                                </span>
                            {% else %}
                                <span class="badge badge-warning">
                                    Aguardando Presença
                                </span>
                            {% endif %}
                        </div>
                    </div>

                    <div>
                        {% if not presente %}
                            <a href="{{ url_for('escanear_qr_code') }}"
                               class="btn btn-primary btn-sm">
                                Marcar Presença
                            </a>
                        {% else %}
                            <button class="btn btn-secondary btn-sm" disabled>
                                Confirmado ✓
                            </button>
                        {% endif %}
                    </div>

                </div>

            {% endfor %}

            {% if eventos|length == 0 %}
                <div class="text-center text-muted py-4">
                    Você ainda não está inscrito em nenhum evento.
                </div>
            {% endif %}

        </div>

        <!-- FOOTER -->
        <div class="text-center mt-5">
            <a href="{{ url_for('aluno_eventos_disponiveis') }}" class="secondary-link">
                ← Voltar para eventos disponíveis
            </a>
        </div>

    </div>

</section>

{% endblock %}
