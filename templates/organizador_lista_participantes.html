{% extends "base.html" %}
{% block title %}Participantes{% endblock %}

{% block content %}

<section class="section">

    <!-- HEADER -->
    <div class="section-header">
        <h2 class="section-title">
            Participantes do <span>Evento</span>
        </h2>
        <p class="section-subtitle">
            {{ evento.nome_evento }}
        </p>
    </div>

    <!-- QR CODE AREA -->
    <div class="qr-event-area">

        <div class="qr-box">
            <p class="qr-title">QR Code de Presença</p>

            <img
                src="https://api.qrserver.com/v1/create-qr-code/?size=260x260&data={{ qr_code_value }}"
                alt="QR Code do Evento"
                class="qr-image"
            >

            <p class="qr-code-text">{{ qr_code_value }}</p>
            <small class="qr-hint">
                Os alunos devem escanear este código no local do evento
            </small>
        </div>

    </div>

    <!-- PARTICIPANTS -->
    <div class="participants-list">

        {% for participante in participantes %}
        {% set presente = participante.status == 'Presente' %}

        <div class="participant-card {{ 'present' if presente else 'waiting' }}">
            <div>
                <h5>{{ participante.nome }}</h5>
                <span>{{ participante.cpf }}</span>
            </div>

            <span class="status-badge {{ 'ok' if presente else 'pending' }}">
                {{ participante.status }}
            </span>
        </div>

        {% endfor %}

        {% if not participantes %}
        <p class="empty-text">Nenhum participante inscrito ainda.</p>
        {% endif %}

    </div>

    <!-- BACK -->
    <div class="page-back">
        <a href="{{ url_for('minhas_reservas') }}" class="secondary-link">
            ← Voltar para Minhas Reservas
        </a>
    </div>

</section>

<style>
/* ===== PARTICIPANTES FINAL STYLE ===== */

.qr-event-area {
    display: flex;
    justify-content: center;
    margin-bottom: 48px;
}

.qr-box {
    background: #fff;
    padding: 36px;
    border-radius: 28px;
    text-align: center;
    box-shadow: 0 30px 80px rgba(0,0,0,.15);
    max-width: 360px;
}

.qr-title {
    font-weight: 600;
    margin-bottom: 18px;
}

.qr-image {
    border-radius: 18px;
    box-shadow: 0 18px 40px rgba(0,0,0,.2);
}

.qr-code-text {
    margin-top: 18px;
    font-weight: 600;
    color: #0f766e;
    word-break: break-all;
}

.qr-hint {
    display: block;
    margin-top: 8px;
    color: #6b7280;
}

.participants-list {
    max-width: 900px;
    margin: 0 auto;
}

.participant-card {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 18px 24px;
    border-radius: 18px;
    margin-bottom: 14px;
    background: #fff;
    box-shadow: 0 12px 30px rgba(0,0,0,.08);
    transition: .25s ease;
}

.participant-card:hover {
    transform: translateY(-2px);
}

.participant-card h5 {
    margin: 0;
    font-size: 1rem;
}

.participant-card span {
    font-size: .85rem;
    color: #6b7280;
}

.status-badge {
    padding: 6px 14px;
    border-radius: 999px;
    font-weight: 600;
    font-size: .85rem;
}

.status-badge.ok {
    background: #dcfce7;
    color: #166534;
}

.status-badge.pending {
    background: #fef9c3;
    color: #854d0e;
}

.empty-text {
    text-align: center;
    color: #6b7280;
    margin-top: 32px;
}

.page-back {
    margin-top: 56px;
    text-align: center;
}
</style>

{% endblock %}
