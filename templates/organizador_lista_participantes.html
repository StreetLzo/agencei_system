{% extends "base.html" %}
{% block title %}Participantes{% endblock %}

{% block content %}
<h2 class="text-left">Lista de Participantes</h2>
<h4 class="text-muted mb-4">{{ evento.nome_evento }}</h4>

<div class="mb-4 p-3 bg-light rounded text-center">
    <p class="mb-1 font-weight-bold">QR Code de Presença:</p>
    
    <img src="https://api.qrserver.com/v1/create-qr-code/?size=250x250&data={{ qr_code_value }}" 
         alt="QR Code do Evento" 
         class="img-fluid my-3 qr-code-img">
         
    <p class="mb-0" style="color: var(--color-dark); word-break: break-all;">
        Código: **{{ qr_code_value }}**
    </p>
    <small class="text-muted">Instrua os alunos a escanear este código no local do evento.</small>
</div>

<ul class="list-group">
    {% for participante in participantes %}
    {% set status_class = 'presente' if participante.status == 'Presente' else 'aguardando' %}
    <li class="list-group-item d-flex justify-content-between align-items-center {{ status_class }}">
        <div>
            <strong>{{ participante.nome }}</strong>
            <small class="d-block text-muted">{{ participante.cpf }}</small>
        </div>
        <span class="badge badge-{{ 'success' if participante.status == 'Presente' else 'warning' }}">
            {{ participante.status }}
        </span>
    </li>
    {% endfor %}
</ul>

<a href="{{ url_for('minhas_reservas') }}" class="secondary-link">Voltar para Minhas Reservas</a>
{% endblock %}